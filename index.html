<!DOCTYPE html>
<html>
  <head>
    <title>A simple deployment with the Now API!</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <h1>Waheguru Ji Ka Khalsa Waheguru Ji Ki Fateh</h1>
    <p id="hukamnama"></p>
    <h2>
      Deployed with
      <a href="https://zeit.co/docs" target="_blank" rel="noreferrer noopener"
        >ZEIT Now</a
      >!
    </h2>
    <p>
      A static <code>/index.html</code> (rewritten with
      for access from the root) file as the homepage, a static
      <code>/style.css</code> file for styling, and a
      <code>api/date.js</code> serverless function that returns the date on
      invocation. See
      <a href="/api/date.js"
        ><code>api/date.js</code> for the Date API</a
      >.
    </p>
    <br />
    <h3>The date according to Node is:</h3>
    <p class="date js-date">Loading date...</p>
    <script>
      async function main() {
        let response = await fetch(`/api/date.js`);
        let date = await response.text()
        document.querySelector('.js-date').textContent = date;


        let hukamnama = '';
        response = await fetch(`/api/hukamnama.js`);
        let hukamnamaJSON = await response.json()
        hukamnamaJSON.hukamnama.map( i => hukamnama += `<div>${i.line.gurmukhi.unicode}</div>` )
        document.querySelector('#hukamnama').innerHTML = hukamnama;
      }
      main();
    </script>
  </body>
</html>
